var t,e,i={307:(t,e,i)=>{function n(){return!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function s(t,e=-80){const i=20*Math.log10(t);return Math.max(i,e)}function c(t,e=-80){return t<e?0:Math.pow(10,.05*t)}i.d(e,{Hw:()=>n,eV:()=>s,xJ:()=>c})}},n={};function s(t){var e=n[t];if(void 0!==e)return e.exports;var c=n[t]={exports:{}};return i[t](c,c.exports,s),c.exports}s.m=i,s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,i)=>(s.f[i](t,e),e)),[])),s.u=t=>t+".index.js",s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t={179:0},e=e=>{var i,n,{ids:c,modules:o,runtime:l}=e,a=0;for(i in o)s.o(o,i)&&(s.m[i]=o[i]);for(l&&l(s);a<c.length;a++)n=c[a],s.o(t,n)&&t[n]&&t[n][0](),t[c[a]]=0},s.f.j=(i,n)=>{var c=s.o(t,i)?t[i]:void 0;if(0!==c)if(c)n.push(c[1]);else{var o=import("./"+s.u(i)).then(e,(e=>{throw 0!==t[i]&&(t[i]=void 0),e}));o=Promise.race([o,new Promise((e=>c=t[i]=[e]))]),n.push(c[1]=o)}};var c={};(()=>{s.d(c,{Xz:()=>r,hz:()=>m,dK:()=>y,D4:()=>t,Th:()=>u,Hw:()=>n});class t{constructor(t,e,i){this.x=t,this.y=e,this.z=i}set(t,e,i){return this.x=t,this.y=e,this.z=i,this}getDifference(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)}copy(){return new t(this.x,this.y,this.z)}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}}class e{constructor(t,e){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}copy(){return new e(this.x,this.y)}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}}var i=s(307);class n{constructor(e,i){this.channel=i,this.isConnected=!1,this.gain=1,this.reverbSend=0,this.occlusion=0,this.attenuationCurveIndex=0,this.renderer=e,this.position=new t(1,0,0)}setInput(t,e=0,i=!0){if(this.disconnect(),t instanceof AudioNode)this.input=t;else{if(!(t instanceof MediaStreamTrack))throw new Error(`Unsupported input type ${t.constructor.name}`);{const e=new MediaStream([t]);this.input=this.renderer.context.createMediaStreamSource(e)}}this.outputIndex=e,i&&this.connect()}getInputNode(){return this.input}connect(){this.isConnected||(this.input.connect(this.renderer,this.outputIndex,this.channel),this.isConnected=!0)}disconnect(){this.isConnected&&(this.input.disconnect(this.renderer,this.outputIndex,this.channel),this.isConnected=!1)}setPosition(t,e,i){this.position.set(t,e,i),this.renderer.port.postMessage({action:"setSourcePosition",source:this.channel,x:t,y:e,z:i})}setAttenuationCurveIndex(t){this.renderer.port.postMessage({action:"assignDistanceFunctionToSource",source:this.channel,functionIndex:t}),this.attenuationCurveIndex=t}getAttenuationCurveIndex(){return this.attenuationCurveIndex}setGainLinear(t){this.renderer.port.postMessage({action:"setSourceGain",source:this.channel,gain:t}),this.gain=t}setGainDecibels(t){this.setGainLinear((0,i.xJ)(t))}setReverbSendLinear(t){this.renderer.port.postMessage({action:"setReverbSend",source:this.channel,gain:t}),this.reverbSend=t}setReverbSendDecibels(t){this.setReverbSendLinear((0,i.xJ)(t))}setOcclusion(t){this.renderer.port.postMessage({action:"setOcclusion",source:this.channel,occlusion:t}),this.occlusion=t}getOcclusion(){return this.occlusion}getGainLinear(){return this.gain}getGainDecibels(){return(0,i.eV)(this.getGainLinear())}getReverbSendLinear(){return this.reverbSend}getReverbSendDecibels(){return(0,i.eV)(this.getReverbSendLinear())}getPosition(){return this.position.copy()}delete(){this.renderer.removeSource(this),this.renderer=null}}class o{constructor(t=1,e=0,i=0,n=0){this.w=t,this.x=e,this.y=i,this.z=n}static fromYawPitchRoll(t,e,i){const n=Math.cos(.5*t),s=Math.sin(.5*t),c=Math.cos(.5*i),l=Math.sin(.5*i),a=Math.cos(.5*e),h=Math.sin(.5*e);return new o(n*c*a+s*l*h,n*l*a-s*c*h,n*c*h+s*l*a,s*c*a-n*l*h)}}class l{constructor(e,i,n,s,c){this.renderer=e,this.w=i,this.x=n,this.y=s,this.z=c,this.position=new t(0,0,0)}setPosition(t,e,i){this.position.set(t,e,i),this.renderer.port.postMessage({action:"setListenerPosition",x:t,y:e,z:i})}getPosition(){return this.position.copy()}setRotation(t,e,i){let n=o.fromYawPitchRoll(t,e,i);this.setRotationQuaternion(n.w,n.x,n.y,n.z)}setRotationQuaternion(t,e,i,n){this.w.value=t,this.x.value=e,this.y.value=i,this.z.value=n}getRotationQuaternion(){return new o(this.w.value,this.x.value,this.y.value,this.z.value)}}class a{constructor(t,e){this.amount=t,this.character=e}}class h{constructor(t){this.amount=t}}class r{constructor(t,i,n=1,s=0,c=12,o=-20,l=60,a=-60,h=100){this.node=t,this.index=i,this.a=new e(n,s),this.b=new e(c,o),this.c=new e(l,a),this.maxDistance=h}getParameters(){return{a:this.a.copy(),b:this.b.copy(),c:this.c.copy(),maxDistance:this.maxDistance}}setParameters(t,e,i,n,s,c,o){this.node.port.postMessage({action:"setDistanceToGainFunction",index:this.index,a_dist:t,b_dist:i,c_dist:s,d_dist:o,a_gain:e,b_gain:n,c_gain:c}),this.a.set(t,e),this.b.set(i,n),this.c.set(s,c),this.maxDistance=o}}class u extends AudioWorkletNode{constructor(t,e,i){super(t,"WebSDKBackend",{outputChannelCount:[2],numberOfInputs:e,numberOfOutputs:1,processorOptions:{numberOfAttenuationCurves:i}}),this.sources=new Array(e),this.attenuationCurves=new Array(i);for(let t=0;t<i;++t)this.attenuationCurves[t]=new r(this,t);const n=new Map;this.parameters.forEach(((t,e)=>{n.set(e,t)})),this.externalizer=new a(n.get("externalizerAmount"),n.get("externalizerCharacter")),this.reverb=new h(n.get("reverbAmount")),this.listener=new l(this,n.get("listenerRotationW"),n.get("listenerRotationX"),n.get("listenerRotationY"),n.get("listenerRotationZ"))}createSource(){for(let t=0;t<this.sources.length;++t)if(!this.sources[t])return this.sources[t]=new n(this,t),this.port.postMessage({action:"resetSource",source:t}),this.sources[t];throw new Error("Cannot create source as all channels are already used!")}removeSource(t){t.disconnect(),delete this.sources[t.channel]}getListener(){return this.listener}getListenerRelativeSourcePositions(){let t=new Array(this.numberOfInputs);for(let e=0;e<this.sources.length;++e)this.sources[e]&&(t[e]=this.sources[e].getPosition().getDifference(this.listener.getPosition()));return t}getSourceDistances(){const t=this.getListenerRelativeSourcePositions();let e=new Array(this.numberOfInputs);for(let i=0;i<t.length;++i)t[i]&&(e[i]=t[i].getLength());return e}destroy(){this.port.postMessage({action:"destroy"})}}var d,b=function(t,e,i,n){return new(i||(i=Promise))((function(s,c){function o(t){try{a(n.next(t))}catch(t){c(t)}}function l(t){try{a(n.throw(t))}catch(t){c(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,l)}a((n=n.apply(t,e||[])).next())}))};class y{constructor(){this.module=new Promise((t=>{y.isSimdSupported().then((e=>b(this,void 0,void 0,(function*(){if(e){const{getModule:e}=yield s.e(50).then(s.bind(s,50));t(e())}else{const{getModule:e}=yield s.e(283).then(s.bind(s,283));t(e())}}))))}))}prepareContext(t){this.context=t;let e=this.context.audioWorklet.addModule("data:application/javascript;base64,KCgpPT57dmFyIGUsdD17ZDooZSxyKT0+e2Zvcih2YXIgcyBpbiByKXQubyhyLHMpJiYhdC5vKGUscykmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHMse006ITAsZ2V0OnJbc119KX0sbzooZSx0KT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9O3QuZCh7fSx7bTooKT0+R2x1ZUNvZGV9KTtjbGFzcyBXQVNNSW5zdGFudGlhdG9yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHtudW1iZXJPZklucHV0czoxLG51bWJlck9mT3V0cHV0czoxfSksKGU9bmV3IEdsdWVDb2RlKHQucHJvY2Vzc29yT3B0aW9ucy5tb2R1bGUpKS5BLnRoZW4oKCgpPT57dGhpcy5wb3J0LnBvc3RNZXNzYWdlKHtpbml0U3VjY2VzczohMCxsaWJWZXJzaW9uOmUudmVyc2lvbn0pfSkpfXByb2Nlc3MoKXtyZXR1cm4hMX19Y29uc3Qgcj1GbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7Y2xhc3MgSGVhcEF1ZGlvQnVmZmVye2NvbnN0cnVjdG9yKGUsdCxyKXt0aGlzLm1vZHVsZT1lLHRoaXMuVj1yLHRoaXMuUz10LHRoaXMuUj10LHRoaXMuQygpfUMoKXtjb25zdCBlPXRoaXMuUyp0aGlzLlYqcjt0aGlzLlc9dGhpcy5tb2R1bGUuXyhlKSx0aGlzLkc9W107Zm9yKGxldCBlPTA7ZTx0aGlzLlM7KytlKXtjb25zdCB0PXRoaXMuVy9yK2UqdGhpcy5WLHM9dCt0aGlzLlY7dGhpcy5HW2VdPXRoaXMubW9kdWxlLlAuc3ViYXJyYXkodCxzKX19SShlKXtlPHRoaXMuUiYmKHRoaXMuUz1lKX1nZXQgTygpe3JldHVybiB0aGlzLlZ9Z2V0IEIoKXtyZXR1cm4gdGhpcy5TfWdldCBGKCl7cmV0dXJuIHRoaXMuUn1nZXRDaGFubmVsRGF0YShlKXtyZXR1cm4gZT49dGhpcy5TP251bGw6dGhpcy5HW2VdfUQoKXtyZXR1cm4gdGhpcy5XfX1jbGFzcyBXQVNNV29ya2xldFByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLkg9ITE7Y29uc3Qgcj10Lm51bWJlck9mSW5wdXRzLHM9dC5wcm9jZXNzb3JPcHRpb25zLm51bWJlck9mQXR0ZW51YXRpb25DdXJ2ZXM7dGhpcy5VPW5ldyBIZWFwQXVkaW9CdWZmZXIoZSxyLDEyOCksdGhpcy5OPW5ldyBIZWFwQXVkaW9CdWZmZXIoZSwyLDEyOCksdGhpcy5UPW5ldyBlLksocixzLHNhbXBsZVJhdGUpLHRoaXMucG9ydC5vbm1lc3NhZ2U9ZT0+e2NvbnN0IHQ9cjtsZXQgcz1lLmRhdGE7aWYoISgiYWN0aW9uImluIHMpKXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBoYXMgbm8gJ2FjdGlvbicga2V5d29yZCEiKTtpZigic2V0U291cmNlUG9zaXRpb24iPT09cy5hY3Rpb24pe2lmKCEoInNvdXJjZSJpbiBzKSl0aHJvdyBuZXcgRXJyb3IoIk1lc3NhZ2UgaGFzIG5vICdzb3VyY2UnIGtleXdvcmQhIik7aWYoISgieCJpbiBzKSl0aHJvdyBuZXcgRXJyb3IoIk1lc3NhZ2UgaGFzIG5vICd4JyBrZXl3b3JkISIpO2lmKCEoInkiaW4gcykpdGhyb3cgbmV3IEVycm9yKCJNZXNzYWdlIGhhcyBubyAneScga2V5d29yZCEiKTtpZighKCJ5ImluIHMpKXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBoYXMgbm8gJ3onIGtleXdvcmQhIik7aWYocy5zb3VyY2U8MHx8cy5zb3VyY2U+PXQpdGhyb3cgbmV3IEVycm9yKCInU291cmNlJyBpbmRleCBvdXQgb2YgcmFuZ2UhIik7dGhpcy5ULkwocy5zb3VyY2Uscy54LHMueSxzLnopfWVsc2UgaWYoInNldExpc3RlbmVyUG9zaXRpb24iPT09cy5hY3Rpb24pe2lmKCEoIngiaW4gcykpdGhyb3cgbmV3IEVycm9yKCJNZXNzYWdlIGhhcyBubyAneCcga2V5d29yZCEiKTtpZighKCJ5ImluIHMpKXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBoYXMgbm8gJ3knIGtleXdvcmQhIik7aWYoISgieSJpbiBzKSl0aHJvdyBuZXcgRXJyb3IoIk1lc3NhZ2UgaGFzIG5vICd6JyBrZXl3b3JkISIpO3RoaXMuVC5YKHMueCxzLnkscy56KX1lbHNlIGlmKCJzZXREaXN0YW5jZVRvR2FpbkZ1bmN0aW9uIj09PXMuYWN0aW9uKXtpZihudWxsPT1zLmluZGV4KXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBoYXMgbm8gJ2luZGV4JyBrZXl3b3JkISIpO2lmKG51bGw9PXMuYV9kaXN0KXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBoYXMgbm8gJ2FfZGlzdCcga2V5d29yZCEiKTtpZihudWxsPT1zLmJfZGlzdCl0aHJvdyBuZXcgRXJyb3IoIk1lc3NhZ2UgaGFzIG5vICdiX2Rpc3QnIGtleXdvcmQhIik7aWYobnVsbD09cy5jX2Rpc3QpdGhyb3cgbmV3IEVycm9yKCJNZXNzYWdlIGhhcyBubyAnY19kaXN0JyBrZXl3b3JkISIpO2lmKG51bGw9PXMuZF9kaXN0KXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBoYXMgbm8gJ2RfZGlzdCcga2V5d29yZCEiKTtpZihudWxsPT1zLmFfZ2Fpbil0aHJvdyBuZXcgRXJyb3IoIk1lc3NhZ2UgaGFzIG5vICdhX2dhaW4nIGtleXdvcmQhIik7aWYobnVsbD09cy5iX2dhaW4pdGhyb3cgbmV3IEVycm9yKCJNZXNzYWdlIGhhcyBubyAnYl9nYWluJyBrZXl3b3JkISIpO2lmKG51bGw9PXMuY19nYWluKXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBoYXMgbm8gJ2NfZ2Fpbicga2V5d29yZCEiKTt0aGlzLlQuWShzLmluZGV4LHMuYV9kaXN0LHMuYV9nYWluLHMuYl9kaXN0LHMuYl9nYWluLHMuY19kaXN0LHMuY19nYWluLHMuZF9kaXN0KX1lbHNlIGlmKCJhc3NpZ25EaXN0YW5jZUZ1bmN0aW9uVG9Tb3VyY2UiPT09cy5hY3Rpb24pe2lmKCEoInNvdXJjZSJpbiBzKSl0aHJvdyBuZXcgRXJyb3IoIk1lc3NhZ2UgaGFzIG5vICdzb3VyY2UnIGtleXdvcmQhIik7aWYoISgiZnVuY3Rpb25JbmRleCJpbiBzKSl0aHJvdyBuZXcgRXJyb3IoIk1lc3NhZ2UgaGFzIG5vICdmdW5jdGlvbkluZGV4JyBrZXl3b3JkISIpO3RoaXMuVC5aKHMuc291cmNlLHMuZnVuY3Rpb25JbmRleCl9ZWxzZSBpZigic2V0U291cmNlR2FpbiI9PT1zLmFjdGlvbil7aWYoISgic291cmNlImluIHMpKXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBoYXMgbm8gJ3NvdXJjZScga2V5d29yZCEiKTtpZighKCJnYWluImluIHMpKXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBoYXMgbm8gJ2dhaW4nIGtleXdvcmQhIik7dGhpcy5ULiQocy5zb3VyY2Uscy5nYWluKX1lbHNlIGlmKCJzZXRSZXZlcmJTZW5kIj09PXMuYWN0aW9uKXtpZighKCJzb3VyY2UiaW4gcykpdGhyb3cgbmV3IEVycm9yKCJNZXNzYWdlIGhhcyBubyAnc291cmNlJyBrZXl3b3JkISIpO2lmKCEoImdhaW4iaW4gcykpdGhyb3cgbmV3IEVycm9yKCJNZXNzYWdlIGhhcyBubyAnZ2Fpbicga2V5d29yZCEiKTt0aGlzLlQuSihzLnNvdXJjZSxzLmdhaW4pfWVsc2UgaWYoInNldE9jY2x1c2lvbiI9PT1zLmFjdGlvbil7aWYoISgic291cmNlImluIHMpKXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBoYXMgbm8gJ3NvdXJjZScga2V5d29yZCEiKTtpZighKCJvY2NsdXNpb24iaW4gcykpdGhyb3cgbmV3IEVycm9yKCJNZXNzYWdlIGhhcyBubyAnb2NjbHVzaW9uJyBrZXl3b3JkISIpO3RoaXMuVC5lZShzLnNvdXJjZSxzLm9jY2x1c2lvbil9ZWxzZSBpZigicmVzZXRTb3VyY2UiPT09cy5hY3Rpb24pe2lmKCEoInNvdXJjZSJpbiBzKSl0aHJvdyBuZXcgRXJyb3IoIk1lc3NhZ2UgaGFzIG5vICdzb3VyY2UnIGtleXdvcmQhIik7dGhpcy5ULnRlKHMuc291cmNlKX1lbHNle2lmKCJkZXN0cm95IiE9PXMuYWN0aW9uKXRocm93IG5ldyBFcnJvcigiVW5rbm93biBhY3Rpb24iKTt0aGlzLkg9ITAsdGhpcy5ULnJlKCl9fX1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJleHRlcm5hbGl6ZXJBbW91bnQiLGRlZmF1bHRWYWx1ZTo1MCxtaW5WYWx1ZTowLG1heFZhbHVlOjEwMCxhdXRvbWF0aW9uUmF0ZToiay1yYXRlIn0se25hbWU6ImV4dGVybmFsaXplckNoYXJhY3RlciIsZGVmYXVsdFZhbHVlOjUwLG1pblZhbHVlOjAsbWF4VmFsdWU6MTAwLGF1dG9tYXRpb25SYXRlOiJrLXJhdGUifSx7bmFtZToibGlzdGVuZXJSb3RhdGlvblciLGRlZmF1bHRWYWx1ZToxLG1pblZhbHVlOi0xLG1heFZhbHVlOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9LHtuYW1lOiJsaXN0ZW5lclJvdGF0aW9uWCIsZGVmYXVsdFZhbHVlOjAsbWluVmFsdWU6LTEsbWF4VmFsdWU6MSxhdXRvbWF0aW9uUmF0ZToiay1yYXRlIn0se25hbWU6Imxpc3RlbmVyUm90YXRpb25ZIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxLGF1dG9tYXRpb25SYXRlOiJrLXJhdGUifSx7bmFtZToibGlzdGVuZXJSb3RhdGlvbloiLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOi0xLG1heFZhbHVlOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9LHtuYW1lOiJyZXZlcmJBbW91bnQiLGRlZmF1bHRWYWx1ZTo1MCxtaW5WYWx1ZTowLG1heFZhbHVlOjEwMCxhdXRvbWF0aW9uUmF0ZToiay1yYXRlIn1dfXByb2Nlc3MoZSx0LHIpe2lmKHRoaXMuSClyZXR1cm4hMTtsZXQgcz1lLmxlbmd0aCxpPXRbMF0sbj1pLmxlbmd0aDt0aGlzLlQuc2Uoci5saXN0ZW5lclJvdGF0aW9uV1swXSxyLmxpc3RlbmVyUm90YXRpb25YWzBdLHIubGlzdGVuZXJSb3RhdGlvbllbMF0sci5saXN0ZW5lclJvdGF0aW9uWlswXSksdGhpcy5ULmllKHIuZXh0ZXJuYWxpemVyQW1vdW50WzBdKSx0aGlzLlQubmUoci5leHRlcm5hbGl6ZXJDaGFyYWN0ZXJbMF0pLHRoaXMuVC5vZShyLnJldmVyYkFtb3VudFswXS8xMDApLHRoaXMuVS5JKHMpLHRoaXMuTi5JKG4pO2ZvcihsZXQgdD0wO3Q8czsrK3QpZVt0XS5sZW5ndGg+MD8odGhpcy5VLmdldENoYW5uZWxEYXRhKHQpLnNldChlW3RdWzBdKSx0aGlzLlQuYWUodCwhMCkpOnRoaXMuVC5hZSh0LCExKTt0aGlzLlQuaGUodGhpcy5VLkQoKSxzLHRoaXMuTi5EKCksbik7Zm9yKGxldCBlPTA7ZTxuOysrZSlpW2VdLnNldCh0aGlzLk4uZ2V0Q2hhbm5lbERhdGEoZSkpO3JldHVybiEwfX1jbGFzcyBHbHVlQ29kZXtjb25zdHJ1Y3RvcihlKXt2YXIgdD17YTp7YTpHbHVlQ29kZS5hYm9ydCxjOnRoaXMudWUuYmluZCh0aGlzKSxiOnRoaXMubGUuYmluZCh0aGlzKSxmZF93cml0ZTp0aGlzLmNlLmJpbmQodGhpcyl9fTt0aGlzLkE9bmV3IFByb21pc2UoKGFzeW5jKHIscyk9PntlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXImJihlPWF3YWl0IFdlYkFzc2VtYmx5LmNvbXBpbGUoZSkpLFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGUsdCkudGhlbigoZT0+e3RoaXMud2U9ZTt2YXIgdD17YXNtOm51bGx9O3RoaXMuTW9kdWxlPXQsdC5hc209ZS5leHBvcnRzLHQuYXNtLmUoKSx0aGlzLnZlcnNpb249e21ham9yOnQuYXNtLm4oKSxtaW5vcjp0LmFzbS5vKCkscGF0Y2g6dC5hc20ucCgpfSx0aGlzLmZlKHQuYXNtLmQuYnVmZmVyKSx0aGlzLks9ZnVuY3Rpb24oZSxyLHMpe3RoaXMuZGU9dC5hc20uZihlLHIscyl9LHRoaXMuSy5wcm90b3R5cGUuaWU9ZnVuY3Rpb24oZSl7dC5hc20ucyh0aGlzLmRlLGUpfSx0aGlzLksucHJvdG90eXBlLm5lPWZ1bmN0aW9uKGUpe3QuYXNtLnQodGhpcy5kZSxlKX0sdGhpcy5LLnByb3RvdHlwZS5vZT1mdW5jdGlvbihlKXt0LmFzbS54KHRoaXMuZGUsZSl9LHRoaXMuSy5wcm90b3R5cGUuZWU9ZnVuY3Rpb24oZSxyKXt0LmFzbS5tKHRoaXMuZGUsZSxyKX0sdGhpcy5LLnByb3RvdHlwZS5MPWZ1bmN0aW9uKGUscixzLGkpe3QuYXNtLmkodGhpcy5kZSxlLHIscyxpKX0sdGhpcy5LLnByb3RvdHlwZS5hZT1mdW5jdGlvbihlLHIpe3QuYXNtLmoodGhpcy5kZSxlLHIpfSx0aGlzLksucHJvdG90eXBlLiQ9ZnVuY3Rpb24oZSxyKXt0LmFzbS5rKHRoaXMuZGUsZSxyKX0sdGhpcy5LLnByb3RvdHlwZS5KPWZ1bmN0aW9uKGUscil7dC5hc20ubCh0aGlzLmRlLGUscil9LHRoaXMuSy5wcm90b3R5cGUudGU9ZnVuY3Rpb24oZSl7dC5hc20ucih0aGlzLmRlLGUpfSx0aGlzLksucHJvdG90eXBlLlg9ZnVuY3Rpb24oZSxyLHMpe3QuYXNtLnEodGhpcy5kZSxlLHIscyl9LHRoaXMuSy5wcm90b3R5cGUuc2U9ZnVuY3Rpb24oZSxyLHMsaSl7dC5hc20udSh0aGlzLmRlLGUscixzLGkpfSx0aGlzLksucHJvdG90eXBlLlk9ZnVuY3Rpb24oZSxyLHMsaSxuLG8sYSxoKXt0LmFzbS52KHRoaXMuZGUsZSxyLHMsaSxuLG8sYSxoKX0sdGhpcy5LLnByb3RvdHlwZS5aPWZ1bmN0aW9uKGUscil7dC5hc20udyh0aGlzLmRlLGUscil9LHRoaXMuSy5wcm90b3R5cGUuaGU9ZnVuY3Rpb24oZSxyLHMsaSl7dC5hc20uaCh0aGlzLmRlLGUscixzLGkpfSx0aGlzLksucHJvdG90eXBlLnJlPWZ1bmN0aW9uKCl7dC5hc20uZyh0aGlzLmRlKX0scigpfSkpfSkpfWZlKGUpe3RoaXMuYnVmZmVyPWUsdGhpcy5tZT1uZXcgSW50OEFycmF5KGUpLHRoaXMuZ2U9bmV3IEludDE2QXJyYXkoZSksdGhpcy55ZT1uZXcgSW50MzJBcnJheShlKSx0aGlzLmtlPW5ldyBVaW50OEFycmF5KGUpLHRoaXMuTWU9bmV3IFVpbnQxNkFycmF5KGUpLHRoaXMuRWU9bmV3IFVpbnQzMkFycmF5KGUpLHRoaXMuUD1uZXcgRmxvYXQzMkFycmF5KGUpLHRoaXMuQWU9bmV3IEZsb2F0NjRBcnJheShlKX11ZShlLHQscil7dGhpcy5tZS5jb3B5V2l0aGluKGUsdCx0K3IpfVZlKGUpe3RyeXt2YXIgdD10aGlzLk1vZHVsZTtyZXR1cm4gdC5hc20uZC5wZShlLXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgrNjU1MzU+Pj4xNiksdGhpcy5mZSh0LmFzbS5kLmJ1ZmZlciksITB9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcigiRmFpbGVkIHRvIGdyb3cgbWVtb3J5ISIpLGNvbnNvbGUubG9nKGUpLEdsdWVDb2RlLmFib3J0KCl9cmV0dXJuITF9XyhlKXtyZXR1cm4gdGhpcy5Nb2R1bGUuYXNtLnkoZSl9c3RhdGljIGFib3J0KCl7dGhyb3cgY29uc29sZS5sb2coImFib3J0IGNhbGxlZCIpLG5ldyBFcnJvcigiRVJST1IiKX1sZShlKXtjb25zb2xlLmxvZygiV0FTTSBNZW1vcnkgR3JvdyIsYCR7ZX0gYnl0ZXMgcmVxdWVzdGVkYCk7bGV0IHQ9dGhpcy5rZS5sZW5ndGg7Zm9yKHZhciByPTE7cjw9NDtyKj0yKXt2YXIgcz10KigxKy4yL3IpO3M9TWF0aC5taW4ocyxlKzEwMDY2MzI5Nik7bGV0IG89TWF0aC5taW4oMjE0NzQ4MzY0OCwoaT1NYXRoLm1heChlLHMpKSsoKG49NjU1MzYpLWklbiklbik7aWYodGhpcy5WZShvKSlyZXR1cm4gMX12YXIgaSxuO3JldHVybiAwfWNlKGUsdCxyLHMpe2Zvcih2YXIgaT0wLG49MDtuPHI7bisrKXt2YXIgbz10aGlzLkVlW3Q+PjJdLGE9dGhpcy5FZVt0KzQ+PjJdO3QrPTg7Zm9yKHZhciBoPTA7aDxhO2grKylwcmludENoYXIoZSx0aGlzLmtlW28raF0pO2krPWF9cmV0dXJuIHRoaXMueWVbcz4+Ml09aSwwfX12YXIgcz1bbnVsbCxbXSxbXV07ZnVuY3Rpb24gcHJpbnRDaGFyKGUsdCl7dmFyIHI9c1tlXTswPT09dHx8MTA9PT10PygoMT09PWU/Y29uc29sZS5sb2c6Y29uc29sZS53YXJuKShmdW5jdGlvbihlLHQscil7Zm9yKHZhciBzPXQrcixpPXQ7ZVtpXSYmIShpPj1zKTspKytpO2Zvcih2YXIgbj0iIjt0PGk7KXt2YXIgbz1lW3QrK107aWYoMTI4Jm8pe3ZhciBhPTYzJmVbdCsrXTtpZigxOTIhPSgyMjQmbykpe3ZhciBoPTYzJmVbdCsrXTtpZigobz0yMjQ9PSgyNDAmbyk/KDE1Jm8pPDwxMnxhPDw2fGg6KDcmbyk8PDE4fGE8PDEyfGg8PDZ8NjMmZVt0KytdKTw2NTUzNiluKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG8pO2Vsc2V7dmFyIHU9by02NTUzNjtuKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2fHU+PjEwLDU2MzIwfDEwMjMmdSl9fWVsc2Ugbis9U3RyaW5nLmZyb21DaGFyQ29kZSgoMzEmbyk8PDZ8YSl9ZWxzZSBuKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG8pfXJldHVybiBufShyLDApKSxyLmxlbmd0aD0wKTpyLnB1c2godCl9cmVnaXN0ZXJQcm9jZXNzb3IoIkNvbnVuZHJ1bSIsV0FTTUluc3RhbnRpYXRvcikscmVnaXN0ZXJQcm9jZXNzb3IoIldlYlNES0JhY2tlbmQiLFdBU01Xb3JrbGV0UHJvY2Vzc29yKX0pKCk7"),i=this;const n=this.module;return new Promise((function(s,c){Promise.all([n,e]).then((e=>{let n=new AudioWorkletNode(t,"Conundrum",{processorOptions:{module:e[0]}});n.port.onmessage=t=>{i.version=t.data.libVersion,1==t.data.initSuccess&&(s(),n.port.onmessage=void 0)}}))}))}createRenderer(t,e){return new u(this.context,t,e)}static isSimdSupported(){return b(this,void 0,void 0,(function*(){return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,8,1,6,0,65,42,253,17,11]))}))}}!function(t){t.AudioFile="AudioFile",t.Empty="EmptyInput"}(d||(d={}));class m{constructor(t,e={},i){this.sources=new Map,this.context=i||new AudioContext(e);let n,s=new y;n="string"==typeof t?fetch(t).then((t=>t.json())):new Promise((e=>e(t))),this.setupComplete=new Promise(((t,e)=>{const i=s.prepareContext(this.context);Promise.all([i,n]).then((e=>{this.setupScene(e[1],s,t)}))}))}startContext(){this.context instanceof AudioContext&&this.context.resume()}setupScene(t,e,i){const n=t.sources.length,s=t.attenuationCurves.length;this.renderer=e.createRenderer(n,s),this.renderer.connect(this.context.destination);let c=[];t.attenuationCurves.forEach(((t,e)=>{const i=this.renderer.attenuationCurves[e];i.name=t.name,i.setParameters(t.ax,t.ay,t.bx,t.by,t.cx,t.cy,t.maxDistance)})),t.sources.forEach((t=>{const e=this.renderer.createSource();if(e.name=t.name,e.setPosition(t.position.x,t.position.y,t.position.z),t.type==d.AudioFile){let i=this.context.createBufferSource();c.push(new Promise(((e,n)=>{m.fetchAudioFile(t.file).then((t=>this.context.decodeAudioData(t))).then((t=>{i.buffer=t,e()}))}))),t.looping&&(i.loop=t.looping),t.shouldStartPlaying&&i.start(),e.setInput(i,0,!0)}t.gainDecibels&&e.setGainDecibels(t.gainDecibels),t.reverbSendDecibels&&e.setReverbSendDecibels(t.reverbSendDecibels),t.occlusion&&e.setOcclusion(t.occlusion),t.attenuationCurveIndex&&e.setAttenuationCurveIndex(t.attenuationCurveIndex),this.sources.set(t.name,e)})),t.listener&&(t.listener.position&&this.renderer.listener.setPosition(t.listener.position.x,t.listener.position.y,t.listener.position.z),t.listener.orientation&&this.renderer.listener.setRotation(t.listener.orientation.yaw,t.listener.orientation.pitch,t.listener.orientation.roll)),Promise.all(c).then((()=>i()))}static fetchAudioFile(t){return new Promise(((e,i)=>{const n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{e(n.response)},n.send()}))}}})();var o=c.Xz,l=c.hz,a=c.dK,h=c.D4,r=c.Th,u=c.Hw;export{o as AttenuationCurve,l as AudioScene,a as Manager,h as Point3D,r as Renderer,u as Source};